# 图片批量压缩工具

一个智能的Python图片压缩工具,可以批量压缩文件夹内的图片,并精确控制目标文件大小。

Motivation:今天上午参加学术会议,拍了一百多张图片,每张照片3MB左右,加一起就将近半个G了,导致博客内存巨大,故写个工具压缩一下.

使用前记得备份,要么就别覆盖

## 功能特点

✅ **精确的大小控制** - 可以指定目标文件大小(KB),程序会自动调整质量参数  
✅ **批量处理** - 支持批量压缩整个文件夹(包括子文件夹)  
✅ **多种格式支持** - 支持 JPG, PNG, WEBP, BMP, TIFF 等常见格式  
✅ **格式转换** - 可以在压缩的同时转换图片格式  
✅ **智能算法** - 使用二分查找自动寻找最佳质量参数  
✅ **尺寸自适应** - 如果质量降到最低仍无法达到目标,会自动缩小图片尺寸  
✅ **详细报告** - 显示每个文件的压缩结果和统计信息  

## 安装依赖

```bash
pip install -r requirements.txt
```

或手动安装:

```bash
pip install Pillow
```

## 使用方法

都写GUI了 别跟我讲你不会用

## 工作原理

1. **二分查找算法**: 使用二分查找在指定的质量范围内寻找最接近目标大小的质量参数
2. **自适应尺寸**: 如果最低质量仍无法达到目标大小,会自动按比例缩小图片尺寸
3. **格式优化**: 
   - JPEG格式使用quality参数(1-100)
   - PNG格式使用compress_level参数(0-9)
   - 自动处理RGBA到RGB的转换

## 支持的图片格式

- JPEG (.jpg, .jpeg)
- PNG (.png)
- WEBP (.webp)
- BMP (.bmp)
- TIFF (.tiff)

## 注意事项

⚠️ **备份重要文件**: 在覆盖原文件前,请务必备份  
⚠️ **目标大小设置**: 目标大小过小可能导致画质严重下降  
⚠️ **PNG透明度**: PNG转JPEG时透明背景会变成白色  

## 性能建议

- 对于高分辨率照片,建议目标大小设置为 200-500 KB
- 对于网页用图,建议目标大小设置为 50-200 KB
- 质量范围建议保持在 20-95 之间,过低会严重损失画质

## 输出示例

```
开始压缩图片...
输入文件夹: ./images
目标大小: 200.0 KB
质量范围: 20-95
✓ photo1.jpg: 2456.3KB → 198.7KB (压缩 91.9%, 质量 72)
✓ photo2.jpg: 3128.5KB → 201.2KB (压缩 93.6%, 质量 68)
✓ photo3.png: 1834.2KB → 195.4KB (压缩 89.3%, 质量 75)

============================================================
压缩完成!
============================================================
总文件数: 3
成功: 3
失败: 0

原始总大小: 7.19 MB
压缩后总大小: 0.58 MB
节省空间: 6.61 MB
平均压缩率: 91.6%
```

## 未完成功能

 - 没有日志
 - GUI不太好看
 - 需要新增拖入功能

## 许可证

MIT License

## 贡献

欢迎提交问题和改进建议!
